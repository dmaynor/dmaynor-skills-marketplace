# Zone Architecture Templates

Reference architectures for cyber range zone design.

## Standard Enterprise Range Architecture

### Network Topology

```
                              ┌─────────────────────────────┐
                              │      CORE INFRASTRUCTURE    │
                              │                             │
                              │  ┌───────┐    ┌───────┐    │
                              │  │ ESXi  │    │ ESXi  │    │
                              │  │ Host1 │    │ Host2 │    │
                              │  └───┬───┘    └───┬───┘    │
                              │      │            │        │
                              │  ┌───┴────────────┴───┐    │
                              │  │   vSwitch Trunk    │    │
                              │  └─────────┬──────────┘    │
                              │            │               │
                              │  ┌─────────┴──────────┐    │
                              │  │    Physical Core   │    │
                              │  │      Switch        │    │
                              │  └─────────┬──────────┘    │
                              └────────────┼───────────────┘
                                           │
                 ┌─────────────────────────┼─────────────────────────┐
                 │                         │                         │
        ┌────────┴────────┐       ┌────────┴────────┐       ┌────────┴────────┐
        │   WHITE ZONE    │       │   ACCESS ZONE   │       │  METRICS ZONE   │
        │   VLAN 100      │       │    VLAN 200     │       │   VLAN 300      │
        │                 │       │                 │       │                 │
        │ ┌─────────────┐ │       │ ┌─────────────┐ │       │ ┌─────────────┐ │
        │ │ Scenario    │ │       │ │ Guacamole   │ │       │ │ Scoring     │ │
        │ │ Controller  │ │       │ │ Gateway     │ │       │ │ Engine      │ │
        │ └─────────────┘ │       │ └─────────────┘ │       │ └─────────────┘ │
        │ ┌─────────────┐ │       │ ┌─────────────┐ │       │ ┌─────────────┐ │
        │ │ Automation  │ │       │ │ File        │ │       │ │ Analytics   │ │
        │ │ Server      │ │       │ │ Transfer    │ │       │ │ Dashboard   │ │
        │ └─────────────┘ │       │ └─────────────┘ │       │ └─────────────┘ │
        └─────────────────┘       └─────────────────┘       └─────────────────┘

                              IN-GAME NETWORK TOPOLOGY
        ┌─────────────────────────────────────────────────────────────────────┐
        │                                                                     │
        │   ┌─────────────┐           ┌─────────────┐           ┌───────────┐│
        │   │  RED ZONE   │           │  GREY ZONE  │           │ BLUE ZONE ││
        │   │  VLAN 666   │           │  VLAN 500   │           │VLAN 1000+ ││
        │   │             │           │             │           │           ││
        │   │ ┌─────────┐ │    NAT    │ ┌─────────┐ │    FW     │┌─────────┐││
        │   │ │ C2 Svr  │─┼───────────┼─│ ISP Rtr │─┼───────────┼│ Edge FW │││
        │   │ └─────────┘ │           │ └─────────┘ │           │└─────────┘││
        │   │ ┌─────────┐ │           │ ┌─────────┐ │           │┌─────────┐││
        │   │ │ Attack  │ │           │ │ DNS     │ │           ││ Core    │││
        │   │ │ Box     │ │           │ │ Roots   │ │           ││ Switch  │││
        │   │ └─────────┘ │           │ └─────────┘ │           │└────┬────┘││
        │   │ ┌─────────┐ │           │ ┌─────────┐ │           │     │     ││
        │   │ │ Phishing│ │           │ │ Web     │ │           │  ┌──┴──┐  ││
        │   │ │ Server  │ │           │ │ Content │ │           │  │ AD  │  ││
        │   │ └─────────┘ │           │ └─────────┘ │           │  │ DC  │  ││
        │   └─────────────┘           └─────────────┘           │  └─────┘  ││
        │                                                       │  ┌─────┐  ││
        │                                                       │  │SIEM │  ││
        │                                                       │  └─────┘  ││
        │                                                       │  ┌─────┐  ││
        │                                                       │  │ WKS │  ││
        │                                                       │  └─────┘  ││
        │                                                       └───────────┘│
        └─────────────────────────────────────────────────────────────────────┘
```

### VLAN Allocation Scheme

| VLAN Range | Purpose | Notes |
|------------|---------|-------|
| 1-99 | Reserved | Management, native |
| 100-199 | White Zone | Exercise administration |
| 200-299 | Access Zone | Participant interface |
| 300-399 | Metrics Zone | Scoring and analytics |
| 400-499 | Reserved | Future use |
| 500-599 | Grey Zone | Simulated Internet |
| 600-699 | Red Zone | Adversary infrastructure |
| 700-899 | Reserved | Expansion |
| 900-999 | Identity Zone | IdP, CA, federation |
| 1000-1999 | Blue Zone - Team 1 | Per-team enclave |
| 2000-2999 | Blue Zone - Team 2 | Per-team enclave |
| 3000-3999 | Blue Zone - Team 3 | Per-team enclave |
| 4000+ | Additional teams | Scale as needed |

### IP Addressing Scheme

```
Out-of-Game Networks:
  White Zone:     10.100.0.0/24
  Access Zone:    10.200.0.0/24
  Metrics Zone:   10.300.0.0/24

In-Game Networks:
  Grey Zone:
    Core Routing: 10.50.0.0/24
    DNS Infra:    10.50.1.0/24
    Web Content:  10.50.2.0/24
    
  Red Zone:       10.66.0.0/16
    C2 Servers:   10.66.1.0/24
    Attack Boxes: 10.66.2.0/24
    Phishing:     10.66.3.0/24
    
  Blue Zone (per team):
    Team 1:
      DMZ:        192.168.100.0/24
      Servers:    192.168.101.0/24
      Workstations: 192.168.102.0/24
      Management: 192.168.103.0/24
    Team 2:
      DMZ:        192.168.200.0/24
      ...
```

## Blue Zone Detailed Architecture

### Enterprise Services Stack

```
┌─────────────────────────────────────────────────────────────────────┐
│                         BLUE ZONE - TEAM 1                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                         DMZ (VLAN 1001)                      │   │
│  │                                                               │   │
│  │   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐    │   │
│  │   │  Web    │   │  Mail   │   │  DNS    │   │  VPN    │    │   │
│  │   │  Proxy  │   │ Gateway │   │ External│   │ Gateway │    │   │
│  │   └────┬────┘   └────┬────┘   └────┬────┘   └────┬────┘    │   │
│  │        │             │             │             │          │   │
│  └────────┼─────────────┼─────────────┼─────────────┼──────────┘   │
│           │             │             │             │               │
│           └─────────────┴──────┬──────┴─────────────┘               │
│                                │                                     │
│                         ┌──────┴──────┐                             │
│                         │   Edge FW   │                             │
│                         └──────┬──────┘                             │
│                                │                                     │
│  ┌─────────────────────────────┴───────────────────────────────┐   │
│  │                    SERVER VLAN (VLAN 1002)                   │   │
│  │                                                               │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │   DC1   │  │   DC2   │  │  File   │  │  SCCM   │        │   │
│  │  │  (PDC)  │  │  (BDC)  │  │ Server  │  │         │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  │                                                               │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │  SIEM   │  │   EDR   │  │  Vuln   │  │   Log   │        │   │
│  │  │ (Splunk)│  │ Console │  │ Scanner │  │Collector│        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  │                                                               │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │   HR    │  │ Finance │  │   CRM   │  │   Dev   │        │   │
│  │  │   App   │  │   App   │  │   App   │  │ Server  │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  │                                                               │   │
│  └───────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐   │
│  │                  WORKSTATION VLAN (VLAN 1003)                 │   │
│  │                                                               │   │
│  │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐     │   │
│  │  │WKS-01│ │WKS-02│ │WKS-03│ │WKS-04│ │WKS-05│ │ ...  │     │   │
│  │  │(NPC) │ │(NPC) │ │(NPC) │ │(NPC) │ │(NPC) │ │      │     │   │
│  │  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘     │   │
│  │                                                               │   │
│  └───────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐   │
│  │                  MANAGEMENT VLAN (VLAN 1004)                  │   │
│  │                                                               │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │ vCenter │  │  IPMI   │  │ Network │  │ Backup  │        │   │
│  │  │         │  │   BMC   │  │  Mgmt   │  │ Server  │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  │                                                               │   │
│  └───────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Blue Zone Component Inventory

| Component | Hostname Pattern | OS | Purpose |
|-----------|------------------|-----|---------|
| Primary DC | DC01-T{team} | Windows Server 2022 | AD DS, DNS, DHCP |
| Backup DC | DC02-T{team} | Windows Server 2022 | AD DS replication |
| File Server | FS01-T{team} | Windows Server 2022 | SMB shares, DFS |
| SCCM | SCCM01-T{team} | Windows Server 2022 | Patch management |
| SIEM | SIEM01-T{team} | Linux (Ubuntu/CentOS) | Splunk/ELK |
| EDR Console | EDR01-T{team} | Linux/Windows | CrowdStrike/Defender |
| Web Proxy | PROXY01-T{team} | Linux | Squid/Blue Coat |
| Mail Gateway | MAIL01-T{team} | Linux | Postfix/Exchange Edge |
| Workstations | WKS{nn}-T{team} | Windows 10/11 | End-user simulation |

## Grey Zone Architecture

### Simulated Internet Infrastructure

```
┌─────────────────────────────────────────────────────────────────────┐
│                           GREY ZONE                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    DNS HIERARCHY                               │ │
│  │                                                                 │ │
│  │                    ┌─────────────┐                             │ │
│  │                    │  Root DNS   │                             │ │
│  │                    │  (a.root)   │                             │ │
│  │                    └──────┬──────┘                             │ │
│  │           ┌───────────────┼───────────────┐                   │ │
│  │           │               │               │                   │ │
│  │    ┌──────┴──────┐ ┌──────┴──────┐ ┌──────┴──────┐           │ │
│  │    │ .com TLD    │ │ .org TLD    │ │ .net TLD    │           │ │
│  │    │ Authority   │ │ Authority   │ │ Authority   │           │ │
│  │    └──────┬──────┘ └──────┬──────┘ └──────┬──────┘           │ │
│  │           │               │               │                   │ │
│  │    ┌──────┴──────┐ ┌──────┴──────┐ ┌──────┴──────┐           │ │
│  │    │ Domain Auth │ │ Domain Auth │ │ Domain Auth │           │ │
│  │    │ google.com  │ │ example.org │ │ cdn.net     │           │ │
│  │    └─────────────┘ └─────────────┘ └─────────────┘           │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    ISP SIMULATION                              │ │
│  │                                                                 │ │
│  │    ┌─────────┐         ┌─────────┐         ┌─────────┐       │ │
│  │    │ ISP-A   │─────────│ IX      │─────────│ ISP-B   │       │ │
│  │    │ Router  │         │ Peering │         │ Router  │       │ │
│  │    └────┬────┘         └─────────┘         └────┬────┘       │ │
│  │         │                                        │            │ │
│  │         │  BGP peering simulation                │            │ │
│  │         │  (or static routes for simplicity)     │            │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    WEB CONTENT                                 │ │
│  │                                                                 │ │
│  │    ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │ │
│  │    │ News    │  │ Social  │  │ Banking │  │ Cloud   │       │ │
│  │    │ Sites   │  │ Media   │  │ Portal  │  │ Storage │       │ │
│  │    └─────────┘  └─────────┘  └─────────┘  └─────────┘       │ │
│  │                                                                 │ │
│  │    ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │ │
│  │    │ Webmail │  │ Software│  │ Govt    │  │ CDN     │       │ │
│  │    │ Providers│ │ Downloads│ │ Sites   │  │ Nodes   │       │ │
│  │    └─────────┘  └─────────┘  └─────────┘  └─────────┘       │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Grey Zone Component Inventory

| Component | Hostname | OS | Purpose |
|-----------|----------|-----|---------|
| Root DNS | dns-root-a | Linux | Root zone authority |
| TLD DNS (.com) | dns-tld-com | Linux | .com TLD authority |
| TLD DNS (.org) | dns-tld-org | Linux | .org TLD authority |
| ISP Router A | isp-a-rtr | VyOS/Linux | BGP simulation |
| ISP Router B | isp-b-rtr | VyOS/Linux | BGP simulation |
| Web Farm 1-N | web-{n} | Linux | Static content hosting |
| Email Relay | smtp-grey | Linux | Mail relay simulation |

## Red Zone Architecture

### Adversary Infrastructure

```
┌─────────────────────────────────────────────────────────────────────┐
│                           RED ZONE                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    C2 INFRASTRUCTURE                           │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │   Mythic    │    │  Covenant   │    │   Cobalt    │     │ │
│  │    │   Server    │    │   Server    │    │   Strike    │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │  Redirector │    │  Redirector │    │  Redirector │     │ │
│  │    │     #1      │    │     #2      │    │     #3      │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    ATTACK PLATFORMS                            │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │    Kali     │    │   Commando  │    │   Parrot    │     │ │
│  │    │   Linux     │    │     VM      │    │   Linux     │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │  Windows    │    │   DVCP      │    │   Custom    │     │ │
│  │    │  Attack     │    │  Toolkit    │    │   Implant   │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    PHISHING INFRASTRUCTURE                     │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │  GoPhish    │    │  Evilginx2  │    │  Lookalike  │     │ │
│  │    │   Server    │    │   Server    │    │   Domains   │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    IP DIVERSITY / GEOLOCATION                  │ │
│  │                                                                 │ │
│  │    Source IPs mapped to adversary nation geolocations:        │ │
│  │    - Russia: 10.66.177.0/24                                   │ │
│  │    - China: 10.66.86.0/24                                     │ │
│  │    - Iran: 10.66.98.0/24                                      │ │
│  │    - North Korea: 10.66.175.0/24                              │ │
│  │                                                                 │ │
│  │    GeoIP database modified to resolve these ranges to         │ │
│  │    appropriate countries for SIEM geolocation features.       │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## Force-on-Force Topology

Multi-team competitive exercise with shared Grey Zone:

```
                              ┌───────────────┐
                              │   GREY ZONE   │
                              │  (Shared)     │
                              └───────┬───────┘
                                      │
        ┌─────────────────────────────┼─────────────────────────────┐
        │                             │                             │
        │                             │                             │
┌───────┴───────┐            ┌────────┴────────┐           ┌───────┴───────┐
│   BLUE TEAM 1 │            │   BLUE TEAM 2   │           │  BLUE TEAM 3  │
│  VLAN 1000-   │            │  VLAN 2000-     │           │  VLAN 3000-   │
│               │            │                 │           │               │
│ ┌───────────┐ │            │ ┌───────────┐   │           │ ┌───────────┐ │
│ │ DC, SIEM  │ │            │ │ DC, SIEM  │   │           │ │ DC, SIEM  │ │
│ │ EDR, WKS  │ │            │ │ EDR, WKS  │   │           │ │ EDR, WKS  │ │
│ └───────────┘ │            │ └───────────┘   │           │ └───────────┘ │
│               │            │                 │           │               │
└───────────────┘            └─────────────────┘           └───────────────┘

                              ┌───────────────┐
                              │   RED ZONE    │
                              │  (Shared or   │
                              │  per-team)    │
                              └───────────────┘
```

## Identity Zone Architecture (Modern Extension)

```
┌─────────────────────────────────────────────────────────────────────┐
│                        IDENTITY ZONE                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    IDENTITY PROVIDERS                          │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │  Keycloak   │    │  SimpleSAML │    │   ADFS      │     │ │
│  │    │  (OIDC)     │    │  (SAML)     │    │  Simulator  │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    PKI INFRASTRUCTURE                          │ │
│  │                                                                 │ │
│  │                    ┌─────────────┐                             │ │
│  │                    │   Root CA   │                             │ │
│  │                    │  (Offline)  │                             │ │
│  │                    └──────┬──────┘                             │ │
│  │           ┌───────────────┼───────────────┐                   │ │
│  │    ┌──────┴──────┐ ┌──────┴──────┐ ┌──────┴──────┐           │ │
│  │    │ Issuing CA  │ │ Issuing CA  │ │ Issuing CA  │           │ │
│  │    │   (TLS)     │ │  (Code)     │ │  (Client)   │           │ │
│  │    └─────────────┘ └─────────────┘ └─────────────┘           │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                    MFA INFRASTRUCTURE                          │ │
│  │                                                                 │ │
│  │    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │ │
│  │    │    TOTP     │    │   FIDO2     │    │    SMS      │     │ │
│  │    │   Server    │    │   Server    │    │  Simulator  │     │ │
│  │    └─────────────┘    └─────────────┘    └─────────────┘     │ │
│  │                                                                 │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```
